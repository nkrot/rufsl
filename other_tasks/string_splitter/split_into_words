#!/usr/bin/ruby
# -*- coding: utf-8; -*-

require 'string_splitter'

words = %w{в одном старинном рукописном травнике болгарии написано если бы знали мужчины обо всех свойствах сельдерея то бы засадили им весь огород а еще это снижает и отпугивает вредителей капусты используют сельдерей в свежем виде и листья и черешки и корнеплоды из него готовят салаты гарниры к овощным рыбными мясным блюдам они приобретают пряный сладковато-горьковатый вкус и крепкий износа носа с сто стоик тебе ктебе} # аромат растение}

#sent = 'ВодномстаринномрукописномтравникеБолгариинаписано:«Еслибызналимужчиныобовсехсвойствахсельдерея,тобызасадилиимвесьогород».Аещеэторастениеснижаетиотпугиваетвредителейкапусты.Используютсельдерейвсвежемвиде–илистья,ичерешки,икорнеплоды.Изнегоготовятсалаты,гарнирыковощным,рыбнымимяснымблюдам.Ониприобретаютпряный,сладковато-горьковатыйвкусикрепкийаромат.'

sent = 'водномстаринномрукописномтравникеболгариинаписано:«еслибызналимужчиныобовсехсвойствахсельдерея,тобызасадилиимвесьогород».аещеэторастениеснижаетиотпугиваетвредителейкапусты.используютсельдерейвсвежемвиде–илистья,ичерешки,икорнеплоды.изнегоготовятсалаты,гарнирыковощным,сторыбнымимяснымблюдам.ониприобретаютпряный,сладковато-горьковатыйвкусикрепкийароматизноса.'

# why double pass algorithm is important:
#sent = 'стоиктебекрепкийаромат'
# if two passes are applied (@allow_unknown_single_letter is used) then splittings are
#  стоик тебе крепкий аромат
#  сто и ктебе крепкий аромат
#  сто и к тебе крепкий аромат
#  с то и ктебе крепкий аромат
#  с то и к тебе крепкий аромат
# if all is done in a single pass, then the output is only
#  стоик тебе крепкий аромат
#  сто и ктебе крепкий аромат

# TODO: process case insensitively

@dict = {}
words.each{ |w| @dict[w] = nil }

splitter = StringSplitter.new
splitter.dictionary = @dict

splitter.process(sent)
splitter.result.each {|spl| puts spl.join(' ')}


